categoria <- function(nivel) {
switch(nivel,
"bajo",
"medio",
"alto",
stop("desconocido")
)
}
categoria(1)
categoria(4)
categoria(4)
categoria <- function(nivel) {
switch(nivel,
"bajo",
"medio",
"alto",
stop("desconocido: ", nivel)  # ✅ Correcto
)
}
categoria(4)
categoria <- function(n) {
switch(n,
1="bajo",
categoria <- function(n) {
switch(n,
1="bajo",
switch(n,
1={"bajo"},
categoria <- function(n) {
switch(n, 1 = {
for (i in 1:10){
if(i %% 2 == 0) next
print(i)
if(i == 7) break
}
suma = 0
count = 0
while(suma > 3){
suma <- suma + runif(n)
count <- count + 1
}
suma = 0
count = 0
while(suma < 3){
suma <- suma + runif(n)
count <- count + 1
}
suma = 0
count = 0
while(suma <= 3){
suma <- suma + runif(1)
count <- count + 1
}
repeat {
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
print("Iteración: ", count)
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count)
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count)
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
count = 0
repeat {
count <- count + 1
cat("Iteración: ", count, "\n")
if (sample(1:6,1) == 6) {
break
}
}
help("is.numeric")
help("is.finite")
escalar(c(1:10), 2)
escalar <- function(x, factor = 1){
if(!is.numeric(x)) stop("The x value need be numeric")
if(!is.finite(factor)) stop("The factor value need be finite")
x * factor
}
escalar(c(1:10), 2)
escalar(c("a":"x"), 0)
escalar <- function(x, factor = 1){
if(!is.numeric(x)) stop("The x value need be numeric")
if(!is.finite(factor) || !is.numeric(factor) || length(factor) != 1 ) stop("The factor value need be finite")
x * factor
}
escalar(c(1, 2, 3), 2)
escalar(c(1, 2, 3))
escalar(1:10, 0.5)
escalar(c("a", "b"), 2)
escalar(c("a", "b"), 2)
escalar(1:5, c(1, 2))
escalar(1:5, NA)
escalar(1:5, Inf)
help(min)
resum_num <- function(x){
c(
min = min(x,na.rm = TRUE),
max = max(x,na.rm = TRUE),
mean = mean(x,na.rm = TRUE),
sd = sd(x,na.rm = TRUE)
)
}
resum_num <- function(x){
list(
min = min(x,na.rm = TRUE),
max = max(x,na.rm = TRUE),
mean = mean(x,na.rm = TRUE),
sd = sd(x,na.rm = TRUE)
)
}
datos <- c(1, 5, 3, 8, 2, NA, 4)
resum_num(datos)
help(sapply)
aplicar2 <- function(x, f){
if(!is.function(f)) stop("The param f, need be a function")
sapply(x, f)
}
aplicar2(c(1, 2, 3), function(x) x * 2)
sapply(c(1, 2, 3), function(x) x * 2)
aplicar2(c(1, 2, 3), function(x) if(x > 1) "mayor" else "menor")
sapply(c(1, 2, 3), function(x) if(x > 1) "mayor" else "menor")
aplicar2 <- function(x, f){
if(!is.function(f)) stop("The param f, need be a function")
f(x)
}
aplicar2(c(1, 2, 3), function(x) x * 2)
sapply(c(1, 2, 3), function(x) x * 2)
aplicar2(c(1, 2, 3), function(x) if(x > 1) "mayor" else "menor")
sapply(c(1, 2, 3), function(x) if(x > 1) "mayor" else "menor")
fabrica_suma <- function(k){
g <- function(x){
x + k
}
}
fabrica_suma(5)
suma <- fabrica_suma(5)
fabrica_suma <- function(k){
g <- function(x){
x + k
}
}
suma <- fabrica_suma(5)
suma(6)
factorial_r <- function(n){
if(!is.numeric(n) || n < 0) stop ("The n need be integer and positive")
if (n == 0 || n == 1) {
return(1)
}
n * factorial_r(n - 1)
}
factorial_r(5)
factorial_r(0)
factorial_r <- function(n){
if(!is.numeric(n) || n < 0) stop ("The n need be integer and positive")
if (n == 0 || n == 1) {
return(1)
}
cat("n: ",n,"factorial de:",n -1)
n * factorial_r(n - 1)
}
factorial_r(5)
factorial_r <- function(n){
if(!is.numeric(n) || n < 0) stop ("The n need be integer and positive")
if (n == 0 || n == 1) {
return(1)
}
cat("n: ",n,"factorial de:",n -1, "\n")
n * factorial_r(n - 1)
}
factorial_r(5)
help("tryCatch")
segura_sqrt <- function(x){
tryCatch(
expr = sqrt(x),
error = function(e){
warning("x need be positive")
return(NA)
}
)
}
segura_sqrt(5)
segura_sqrt(-3)
segura_sqrt <- function(x){
tryCatch(
expr = sqrt(x),
error = function(e){
warning("x need be positive")
return(NA)
},
warning = function(w){
warning("x need be positive")
}
)
}
segura_sqrt(5)
segura_sqrt(-3)
clear
cls
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6) x(sample(1:6,1))
cat("Iteraciones recursivas:", n, "\n")
}
x(sample(1:6,1))
cat("Ha tardado:", count)
x(sample(1:6,1))
cat("Ha tardado:", count)
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6) x(sample(1:6,1))
cat("Iteraciones recursivas:", n, "\n")
return()
}
x(sample(1:6,1))
cat("Ha tardado:", count)
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6) x(sample(1:6,1))
cat("Iteraciones recursivas:", n, "\n")
}
x(sample(1:6,1))
cat("Ha tardado:", count)
x(sample(1:6,1))
cat("Ha tardado:", count)
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6) x(sample(1:6,1))
cat("Iteraciones recursivas:", n, "\n")
}
x(sample(1:6,1))
cat("Ha tardado:", count)
n != 6
x(sample(1:6,1))
x(sample(1:6,1))
x(sample(1:6,1))
x(sample(1:6,1))
x(sample(1:6,1))
x(sample(1:6,1))
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6){
x(sample(1:6,1))
}else{
print("Encontre el 6")
return(n)
}
cat("Iteraciones recursivas:", n, "\n")
}
x(sample(1:6,1))
cat("Ha tardado:", count)
x(sample(1:6,1))
cat("Ha tardado:", count)
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6){
x(sample(1:6,1))
}else{
print("Encontre el 6")
return(n)
}
}
x(sample(1:6,1))
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6){
x(sample(1:6,1))
}else{
print("Encontre el 6")
return(count)
}
}
x(sample(1:6,1))
x(sample(1:6,1))
count <- 0
x <- function(n){
count <<- count + 1
if(n != 6){
x(sample(1:6,1))
}else{
print("Encontre el 6")
return(count)
count <<- 0
}
}
x(sample(1:6,1))
x(sample(1:6,1))
x(sample(1:6,1))
setwd("/home/alumnot/Escritorio/PIA/ejercicios/2-Unidad/02-tarea/")
data <- read.csv2("69959.csv")
setwd("D:\\Desarrollo\\IA-programing\\2-Unidad\\02-tarea")
data <- read.csv2("69959.csv")
head(data)
setwd("D:\\Desarrollo\\IA-programing\\2-Unidad\\02-tarea")
data <- read.csv2("69959.csv")
head(data)
View(data)
#Eliminación de la primera columna.
data <- data[, -c(1)]
colnames(data)[c(1:6)] <- c("comunidad", "provincias", "ocupacion", "sexo", "periodo", "profesionales")
head(data)
head(data)
# Creación de una función al que le pasas una columna y un valor y te automátiza el proceso.
clean_column <- function(col, val){
col[which(col == "")] <- val
return(col)
}
data$comunidad <- clean_column(data$comunidad, "nacional")
data$provincias <- clean_column(data$provincias, NA)
# Primero con gsub obtenemos las cadenas sin ".", despues las casteamos.
data$profesionales <- as.numeric(gsub("\\.", "", data$profesionales))
head(data)
extraer_provincia <- function(dataFrame, param){
#Comprobaciones y validaciones
if(!is.data.frame(dataFrame)) stop("El parametro dataFrame, debe ser un data frame.")
if(length(grep(param, dataFrame)) == 0) stop(paste("No se encuentra la provincia: ", param, " en el dataframe"))
if(!is.character(param)) stop("La variable param debe ser un string")
# Busqueda de coincidencias dentro de la columa pronvincias y extraemos los datos que queremos.
res <- dataFrame[grepl(param, dataFrame$provincias) & dataFrame$sexo == "Total", c("ocupacion", "periodo", "profesionales")]
return(res)
}
granada <- extraer_provincia(data, "Granada")
View(granada)
filtrado <- subset(data, (data$ocupacion == "91 Empleados domésticos"
& data$comunidad != "nacional"
& !is.na(data$provincias)
& data$periodo == "2022")
& data$sexo != "Total"
)
View(filtrado)
#Apartado 7: Generar Resumen
filtrado <- filtrado[,-c(1,3,5)]
summary <- data.frame(provincia = character(),
total = numeric(),
hombres = numeric(),
mujeres = numeric(),
prop_hombres = numeric()
)
# Hacemos un for que recorra las filas de 2, en 2, porque tenemos la fila de hombres y mujeres,
# si vamos de dos en dos, accedemos siempre a los hombres y así evitamos salirnos del bucle.
for (i in seq(1, nrow(filtrado), by=2)){
print(filtrado[i,])
provincia <-filtrado[i,1]
total <- sum(filtrado[i,3] + filtrado[i+1,3])
hombres <-  filtrado[i,3]
mujeres <- filtrado[i+1,3]
prop_hombres <- round((hombres / total) * 100, 2)
#Creamos la fila
newRow <- data.frame(
provincia,
total,
hombres,
mujeres,
prop_hombres
)
# juntamos la fila con el dataframe summary
summary <- rbind(summary, newRow)
}
#Ordenamos el dataframe
summary <- summary[order(summary$provincia),]
View(summary)
